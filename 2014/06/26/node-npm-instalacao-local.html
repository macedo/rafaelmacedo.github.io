<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rafael Macedo - Instalando nodejs + npm com um usuário sem privilégio de root</title>
  <meta name="author" content="Rafael Macedo" />
  <meta name="description" content="The blog of Rafael Macedo" />
  <link rel="canonical" href="http://blog.rafaelmacedo.com/2014/06/26/node-npm-instalacao-local.html" />

  <link rel="shortcut icon" href="/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Rafael Macedo" href="http://blog.rafaelmacedo.com/atom.xml" />

  <link rel="stylesheet" href="/assets/css/all.css">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <h2>I'm <a href="/">Rafael Macedo</a>.</h2>
  <hr/>
  <div>
    <div id="social">
      Follow me:
<ul id="stalker">
  
  <li><a title="macedo on Github" href="https://github.com/macedo">
    github.com/macedo
  </a></li>
  

  
  <li><a title="macedorafael on Twitter" href="https://twitter.com/macedorafael">
    twitter.com/macedorafael
  </a></li>
  

  
  <li><a title="Rafael Macedo on LinkedIn" href="https://www.linkedin.com/in/macedorafael">
    linkedin.com/in/macedorafael
  </a></li>
  

  <li><a title="RSS feed" id="rss" href="/atom.xml">RSS feed</a></li>
</ul>

    </div>
  </div>
</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  26 de Jun 2014
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">Instalando nodejs + npm com um usuário sem privilégio de root</h1>

<div id="post">
  <p>Ultimamente tenho desenvolvido bastante em nodejs seja para aprendizado ou projetos pessoais. Uma coisa que
sempre me encomodou foi o fato do <a href="http://npmjs.org">npm</a> (Node Package Manager) precisar de privilégios root (sudo).</p>

<p>Felizmente isso pode ser contornado instalando o nodejs + npm com um usuário normal seguindo alguns simples passos descritos a seguir <a href="#note-1">[1]</a>.</p>

<p>1.Adicione ao <code>~/.npmrc</code> as seguintes linhas</p>

<pre><code>root    = "$HOME/.local/lib/node_modules"
binroot = "$HOME/.local/bin"
manroot = "$HOME/.local/share/man"
</code></pre>

<p>2.Download e instalação do nodejs</p>

<pre><code>cd /tmp
wget http://nodejs.org/dist/v0.10.29/node-v0.10.29.tar.gz
tar -xpf node-v0.10.29.tar.gz &amp;&amp; cd node-v0.10.29
./configure --prefix=~/.local &amp;&amp; make &amp;&amp; make install
</code></pre>

<p>3.Agora vamos criar um link simbólico para o <code>~/.node_modules</code>.</p>

<pre><code>cd
ln -s .local/lib/node_modules .node_modules
</code></pre>

<p>4.E por ultimo adicione <code>~/.local/bi</code>n ao $PATH</p>

<pre><code>echo "export PATH=$HOME/.local/bin:$PATH" &gt;&gt; $HOME/.bashrc
source $HOME/.bashrc
</code></pre>

<p>Com isso, ao instalar um pacote npm com a flag global ele será instalado localmente (~/.local) não necessitando de privilégios root mais.</p>

<p><em class="notes" id="note-1">[1] Os passos descritos vão instalar o Nodejs e npm em <code>~/.local</code>. Por padrão ele seria instalado em <code>/usr/local</code></em></p>

</div>



<script>
    (function() {
    var script = document.createElement("script");
    script.src = "/assets/js/async-gist.js";
    script.async = true

    var entry = document.getElementsByTagName("script")[0];
    entry.parentNode.insertBefore(script, entry);
  })();
</script>

<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    function asyncLoad() {
      var disqus_shortname = "blogdomacedo";

      var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
      dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
      (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
    }

    if (window.attachEvent)
      window.attachEvent("onload", asyncLoad);
    else
      window.addEventListener("load", asyncLoad, false);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      <div class="footer">
        <div class="disclaimer">
  <p>© Rafael Macedo, 2014</p>
</div>

      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37762981-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
